{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Movimientos</title>
    <link rel="stylesheet" href="https://bootswatch.com/5/zephyr/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/estilos.css' %}" />
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <ul class="navbar-nav me-auto">
            <li class="nav-item"><a class="nav-link" href="/Inventario_general">Inventario general</a></li>
            {% if privilegio == 'ADM-IN1' %}
            <li class="nav-item"><a class="nav-link" href="/Compras">Entradas</a></li>
            <li class="nav-item"><a class="nav-link" href="/Ventas">Cuentas por cobrar</a></li>
            <li class="nav-item"><a class="nav-link" href="/Otras_E_S">Otras E/S</a></li>
            <li class="nav-item"><a class="nav-link" href="/Movimientos">Movimientos de inventario</a></li>
            <li class="nav-item dropdown">
                <button class="nav-link dropdown-toggle btn" type="button" id="navbarDropdown" aria-haspopup="true" data-toggle="dropdown" aria-expanded="false">
                    Usuarios
                </button>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="/Registro">Registrar usuario</a>
                    <a class="dropdown-item" href="/Usuarios">Usuarios</a>
                </div>
            </li>
            <li class="nav-item"><a class="nav-link" href="/Auditoria">Auditoria</a></li>
            {% elif privilegio == 'JEFE' %}
            <li class="nav-item"><a class="nav-link" href="/Compras">Entradas</a></li>
            <li class="nav-item"><a class="nav-link" href="/Ventas">Cuentas por cobrar</a></li>
            <li class="nav-item"><a class="nav-link" href="/Otras_E_S">Otras E/S</a></li>
            <li class="nav-item"><a class="nav-link" href="/Movimientos">Movimientos de inventario</a></li>
            <li class="nav-item"><a class="nav-link" href="/Auditoria">Auditoria</a></li>
            {% else %}
            <li class="nav-item"><a class="nav-link" href="/Movimientos">Movimientos de inventario</a></li>
            {% endif %}
        </ul>
        <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" href="{% url 'cerrar_sesion' %}">Cerrar sesión</a></li>
        </ul>
    </nav>
    <div class="container  col-md-7">
                <div class="row">
                    <a href="/Ver_compras" id="btnCompras" class="btn btn-dark col-sm m-1 d-flex align-items-center justify-content-center">Ver compras</a>
                    <a href="/Ver_cuentas_por_cobrar" id="btnVentas" class="btn btn-success col-sm m-1 d-flex align-items-center justify-content-center">Ver ventas</a>
                    <a href="/Ver_otras" id="btnOtro" class="btn btn-warning col-sm m-1 d-flex align-items-center justify-content-center">Ver otros movimientos</a>
                </div>
            </div>
    <div class="container d-flex justify-content-center">
        <div class="mt-3">
            <div class="container col-lg-4 mb-1 card card-body">
                <h3 class="text-center">Buscar operación</h3>
                <input type="search" id="buscar" class="form-control" placeholder="Escribe el movimiento que deseas buscar..." />
            </div>
            
            <form action="{% url 'convertir_difmov_excel' %}" method="POST" class="mt-3 mb-1">
                {% csrf_token %}
                <button type="submit" class="btn btn-success">
                    Descargar
                    <i class="bi bi-file-earmark-spreadsheet-fill">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-file-earmark-spreadsheet-fill" viewBox="0 0 16 16">
                            <path d="M6 12v-2h3v2H6z"/>
                            <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM3 9h10v1h-3v2h3v1h-3v2H9v-2H6v2H5v-2H3v-1h2v-2H3V9z"/>
                        </svg>
                    </i>
                </button>
            </form>
            <div class="table-wrapper-scroll-y my-custom-scrollbar">
                <table id="table" class="table table-hover mt-4">
                    <thead>
                        <tr class="text-center">
                            <th>Id movimiento</th>
                            <th>Tipo movimiento</th>
                            <th>Producto</th>
                            <th>Fecha</th>
                            <th>Origen o destino</th>
                            <th>Departamento</th>
                            <th>Motivo</th>
                            <th>Cantidad</th>
                            <th>Medida</th>
                        </tr>
                    </thead>
                    <tbody id="movimientos" class="text-center">
                        {% for mov in movimientos %}
                            <tr>
                                <td>{{ mov.0 }}</td>
                                <td>{{ mov.1 }}</td>
                                <td>{{ mov.2 }}</td>
                                <td>{{ mov.3 }}</td>
                                <td>{{ mov.4 }}</td>
                                <td>{{ mov.5 }}</td>
                                <td>{{ mov.6 }}</td>
                                <td>{{ mov.7|floatformat:0 }}</td>
                                <td>{{ mov.8 }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <footer class="text-center">
        <p>Derechos reservados <strong>Fluidos McGreen de México S.A de C.V</strong></p>
        <p>Fecha: {% now 'd \d\e F \d\e\l Y' %}</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{% static 'js/main.js' %}"></script>
</body>
</html>